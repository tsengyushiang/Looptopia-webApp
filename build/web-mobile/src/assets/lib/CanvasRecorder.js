function CanvasRecorder(e,o){this.start=function(){let e=["video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg"];for(let o in e)if(MediaRecorder.isTypeSupported(e[o])){d=e[o];break}null==d&&console.log("No supported type found for MediaRecorder");let c={mimeType:d,videoBitsPerSecond:o||25e5};t=[];try{r=new MediaRecorder(n,c)}catch(e){return alert("MediaRecorder is not supported by this browser."),void console.error("Exception while creating MediaRecorder:",e)}console.log("Created MediaRecorder",r,"with options",c),r.onstop=s,r.ondataavailable=i,r.start(100),console.log("MediaRecorder started",r)},this.stop=function(){r.stop(),console.log("Recorded Blobs: ",t),c.controls=!0},this.save=function(e){const o=new Blob(t,{type:d}),r=window.URL.createObjectURL(o);setTimeout(()=>{document.body.removeChild(a),window.URL.revokeObjectURL(r)},100)},this.getBlob=function(){return new Blob(t,{type:d})};var t=[],d=null,r=null,n=e.captureStream();if(void 0==typeof n||!n)return;const c=document.createElement("video");function i(e){e.data&&e.data.size>0&&t.push(e.data)}function s(e){console.log("Recorder stopped: ",e);const o=new Blob(t,{type:d});c.src=window.URL.createObjectURL(o)}c.style.display="none"}