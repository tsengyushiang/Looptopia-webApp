window.__require=function t(e,o,i){function n(c,r){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!r&&p)return p(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+c+"'")}}var d=o[c]={exports:{}};e[c][0].call(d.exports,function(t){return n(e[c][1][t]||t)},d,d.exports,t,e,o,i)}return o[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<i.length;c++)n(i[c]);return n}({AnimationReplay:[function(t,e,o){"use strict";cc._RF.push(e,"efb07t7HGFL86QAx29uZfFK","AnimationReplay"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveUp=null,e.moveDown=null,e.moveRight=null,e.moveLeft=null,e.eat=null,e.nodright=null,e.nodleft=null,e.nodfront=null,e.nodback=null,e.sit=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.animator=this.getComponent(cc.Animation)},e.prototype.start=function(){this.animator.addClip(this.moveUp,"moveup"),this.animator.addClip(this.moveDown,"movedown"),this.animator.addClip(this.moveRight,"moveright"),this.animator.addClip(this.moveLeft,"moveleft"),this.animator.addClip(this.eat,"eat"),this.animator.addClip(this.nodright,"right"),this.animator.addClip(this.nodleft,"left"),this.animator.addClip(this.nodfront,"front"),this.animator.addClip(this.nodback,"back"),this.animator.addClip(this.sit,"sit")},e.prototype.setAnimation=function(t){""==t?this.animator.stop():0==this.animator.getAnimationState(t).isPlaying&&this.animator.play(t)},e.prototype.end=function(){if(this.animator.getAnimationState("sit")){if(1==this.animator.getAnimationState("sit").isPlaying)return;var t=this,e=function(){t.animator.removeClip(t.sit),t.animator.off("finished",e,this)};t.animator.on("finished",e,this),t.animator.play("sit")}},__decorate([a(cc.AnimationClip)],e.prototype,"moveUp",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"moveDown",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"moveRight",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"moveLeft",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"eat",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"nodright",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"nodleft",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"nodfront",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"nodback",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"sit",void 0),e=__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Counter:[function(t,e,o){"use strict";cc._RF.push(e,"a35e45QanZHcJgAtXl7kIsR","Counter"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeBar=null,e.showTimeBar=!1,e.nextSceneName="",e.countDown_second=0,e.active_whenStart=[],e.startAnimation=null,e.endAnimation=null,e.onBegin=[],e.onFinish=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.timeBar.progress=1,this.timeBar.node.active=this.showTimeBar,cc.director.preloadScene(this.nextSceneName,function(){})},e.prototype.start=function(){var t=this,e=function(){t.startTimer(),t.active_whenStart.forEach(function(t){t.active=!0}),t.onBegin.forEach(function(t){t.emit()})};if(this.startAnimation){var o=function(){e(),t.startAnimation.off("finished",o,this)};this.startAnimation.on("finished",o,this),this.startAnimation.play()}else e()},e.prototype.startTimer=function(){var t=0,e=function(){t>=this.countDown_second&&(this.unschedule(e),this.timeUp()),this.timeBar.progress=1-t/this.countDown_second,t++};this.schedule(e,1)},e.prototype.timeUp=function(){var t=this;if(t.onFinish.forEach(function(t){t.emit()}),this.endAnimation){this.endAnimation.on("finished",function(){cc.director.loadScene(t.nextSceneName)},this),this.endAnimation.play()}},__decorate([a(cc.Slider)],e.prototype,"timeBar",void 0),__decorate([a],e.prototype,"showTimeBar",void 0),__decorate([a],e.prototype,"nextSceneName",void 0),__decorate([a],e.prototype,"countDown_second",void 0),__decorate([a(cc.Node)],e.prototype,"active_whenStart",void 0),__decorate([a(cc.Animation)],e.prototype,"startAnimation",void 0),__decorate([a(cc.Animation)],e.prototype,"endAnimation",void 0),__decorate([a(cc.Component.EventHandler)],e.prototype,"onBegin",void 0),__decorate([a(cc.Component.EventHandler)],e.prototype,"onFinish",void 0),e=__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"b6886D4mHZC3Z5ACg6C7k47","Global"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./NetWrokManger"),n=cc._decorator,a=n.ccclass,c=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dayString=null,e.ui=null,e}return __extends(e,t),Object.defineProperty(e,"Instance",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=this;i.default.getAllRecords(function(e){t.dayString.string=(e.length+1).toString(),t.ui.active=!0,t.node.runAction(cc.fadeOut(1))})},e.prototype.GoPracticeScene=function(){var t=cc.callFunc(function(){cc.director.loadScene("practiceScene")}),e=cc.sequence(cc.fadeIn(1),t);this.node.runAction(e)},e.prototype.GoGameScene=function(){cc.director.loadScene("playingScene")},e.prototype.GoEndScene=function(){cc.director.loadScene("recordScene")},e.prototype.GoMenu=function(){cc.director.loadScene("startMenu")},e.prototype.exit=function(){cc.game.end()},__decorate([c(cc.Label)],e.prototype,"dayString",void 0),__decorate([c(cc.Node)],e.prototype,"ui",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./NetWrokManger":"NetWrokManger"}],MovingController:[function(t,e,o){"use strict";cc._RF.push(e,"8d901/X7XtOlYZ1dC0ipAHf","MovingController"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stepSize=0,e.moveUp=null,e.moveDown=null,e.moveRight=null,e.moveLeft=null,e.eat=null,e.nodright=null,e.nodleft=null,e.nodfront=null,e.nodback=null,e.sit=null,e.potFood=null,e.hint_nod=null,e.hint_eat=null,e.targetPositionNode=null,e.currentMovingType=null,e.disableDetectInput=!1,e.spaceFunc=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,0),this.animator=this.node.getComponent(cc.Animation),this.rigibody=this.node.getComponent(cc.RigidBody),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.start=function(){this.animator.addClip(this.moveUp,"moveup"),this.animator.addClip(this.moveDown,"movedown"),this.animator.addClip(this.moveRight,"moveright"),this.animator.addClip(this.moveLeft,"moveleft"),this.animator.addClip(this.eat,"eat"),this.animator.addClip(this.sit,"sit"),this.nodback&&this.nodfront&&this.nodleft&&this.nodright&&(this.animator.addClip(this.nodright,"right"),this.animator.addClip(this.nodleft,"left"),this.animator.addClip(this.nodfront,"front"),this.animator.addClip(this.nodback,"back"),this.latestDirection="right"),this.spaceFunc=this.goNod,window.nodCount=0},e.prototype.update=function(t){switch(t*=1e4,this.currentMovingType){case cc.macro.KEY.w:this.rigibody.linearVelocity=cc.v2(0,Math.abs(this.stepSize*t)),0==this.animator.getAnimationState("moveup").isPlaying&&this.animator.play("moveup"),this.latestDirection="back";break;case cc.macro.KEY.s:this.rigibody.linearVelocity=cc.v2(0,-Math.abs(this.stepSize*t)),0==this.animator.getAnimationState("movedown").isPlaying&&this.animator.play("movedown"),this.latestDirection="front";break;case cc.macro.KEY.a:this.rigibody.linearVelocity=cc.v2(-Math.abs(this.stepSize*t),0),0==this.animator.getAnimationState("moveleft").isPlaying&&this.animator.play("moveleft"),this.latestDirection="left";break;case cc.macro.KEY.d:this.rigibody.linearVelocity=cc.v2(Math.abs(this.stepSize*t),0),0==this.animator.getAnimationState("moveright").isPlaying&&this.animator.play("moveright"),this.latestDirection="right";break;case cc.macro.KEY.space:this.rigibody.linearVelocity=cc.v2(0,0),this.spaceFunc(t),this.currentMovingType=cc.macro.KEY.escape;break;case cc.macro.KEY.escape:break;default:this.rigibody.linearVelocity=cc.v2(0,0),this.animator.stop()}},e.prototype.goSit=function(){var t=this;this.rigibody.linearVelocity=cc.v2(0,0),this.node.stopAllActions(),this.disableDetectInput=!0,this.currentMovingType=cc.macro.KEY.escape;var e=function(){t.disableDetectInput=!1,t.animator.off("finished",e,this)};t.animator.on("finished",e,this),t.animator.play("sit")},e.prototype.getCurrentAction=function(){for(var t=["moveup","movedown","moveright","moveleft","eat","sit","right","left","front","back"],e=0;e<t.length;e++)if(1==this.animator.getAnimationState(t[e]).isPlaying)return t[e];return""},e.prototype.goEat=function(t){this.disableDetectInput=!0;var e=this,o=cc.sequence(cc.callFunc(function(){e.node.position.y-e.targetPositionNode.y>1e-5?0==e.animator.getAnimationState("movedown").isPlaying&&e.animator.play("movedown"):e.node.position.y-e.targetPositionNode.y<-1e-5&&0==e.animator.getAnimationState("moveup").isPlaying&&e.animator.play("moveup")}),cc.moveTo(Math.abs(this.node.position.y-this.targetPositionNode.y)/(this.stepSize*t),cc.v2(this.node.position.x,this.targetPositionNode.y)),cc.callFunc(function(){e.node.position.x-e.targetPositionNode.x>1e-5?0==e.animator.getAnimationState("moveleft").isPlaying&&e.animator.play("moveleft"):e.node.position.x-e.targetPositionNode.x<-1e-5&&0==e.animator.getAnimationState("moveright").isPlaying&&e.animator.play("moveright")}),cc.moveTo(Math.abs(this.node.position.x-this.targetPositionNode.x)/(this.stepSize*t),cc.v2(this.targetPositionNode.x,this.targetPositionNode.y)),cc.callFunc(function(){var t=function(){e.disableDetectInput=!1,e.potFood.destroy(),e.spaceFunc=e.goNod,e.latestDirection="back",e.animator.off("finished",t,this)};e.animator.on("finished",t,this),e.animator.play("eat")}));this.node.runAction(o)},e.prototype.goNod=function(t){if(this.animator.getAnimationState("left")&&this.animator.getAnimationState("right")&&this.animator.getAnimationState("front")&&this.animator.getAnimationState("back")&&1!=this.animator.getAnimationState("left").isPlaying&&1!=this.animator.getAnimationState("right").isPlaying&&1!=this.animator.getAnimationState("front").isPlaying&&1!=this.animator.getAnimationState("back").isPlaying){window.nodCount++;var e=this;this.disableDetectInput=!0;var o=function(){e.disableDetectInput=!1,e.animator.off("finished",o,this)};e.animator.on("finished",o,this),e.animator.play(this.latestDirection)}},e.prototype.onKeyDown=function(t){if(!this.disableDetectInput)switch(t.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.s:case cc.macro.KEY.a:case cc.macro.KEY.d:case cc.macro.KEY.space:this.currentMovingType=t.keyCode}},e.prototype.onKeyUp=function(t){if(!this.disableDetectInput)switch(t.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.s:case cc.macro.KEY.a:case cc.macro.KEY.d:this.currentMovingType==t.keyCode&&(this.currentMovingType=null)}},e.prototype.onBeginContact=function(t,e,o){o.node==this.potFood&&(this.hint_eat.active=!0,this.hint_nod.active=!1,this.spaceFunc=this.goEat)},e.prototype.onEndContact=function(t,e,o){o.node==this.potFood&&(this.hint_nod.active=!0,this.hint_eat.active=!1,this.spaceFunc=this.goNod)},__decorate([a({type:cc.Integer})],e.prototype,"stepSize",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"moveUp",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"moveDown",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"moveRight",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"moveLeft",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"eat",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"nodright",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"nodleft",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"nodfront",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"nodback",void 0),__decorate([a(cc.AnimationClip)],e.prototype,"sit",void 0),__decorate([a(cc.Node)],e.prototype,"potFood",void 0),__decorate([a(cc.Node)],e.prototype,"hint_nod",void 0),__decorate([a(cc.Node)],e.prototype,"hint_eat",void 0),__decorate([a(cc.Node)],e.prototype,"targetPositionNode",void 0),e=__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],NetWrokManger:[function(t,e,o){"use strict";cc._RF.push(e,"5a0faI1wBpAwp1zoS/F470e","NetWrokManger"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t.getAllRecords=function(t){var e=document.createElement("script");e.src="https://script.google.com/macros/s/AKfycbwk1bNZccy5l6yYKtYd1VAcPuOCkyxAb69DEXHF7z0-2lDhYBDB/exec?callback=getRequestCallBack",document.body.appendChild(e),window.requestOnFinishedFunction=t},t.saveFile=function(t){var e=t.compress(),o=document.createElement("script");o.src="https://script.google.com/macros/s/AKfycbwk1bNZccy5l6yYKtYd1VAcPuOCkyxAb69DEXHF7z0-2lDhYBDB/exec?data="+e+"&callback=getRequestCallBack",document.body.appendChild(o)},t}();o.default=i,cc._RF.pop()},{}],PathDrawer:[function(t,e,o){"use strict";cc._RF.push(e,"3fddathJ31CI7Ssaw0wd1Oc","PathDrawer"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./AnimationReplay"),n=cc._decorator,a=n.ccclass,c=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.graphics=null,e.path=[],e.drawLine_second=0,e.index=0,e.drawPath=!1,e.loop=!1,e.totalPlayTime=10,e.currentTime=0,e}return __extends(e,t),e.prototype.start=function(){this.path=window.accurate_path,this.drawLine_second=1e3*this.totalPlayTime/this.path.length},e.prototype.smallOut=function(){var t=cc.sequence(cc.delayTime(1),cc.scaleTo(1,0,0));this.node.parent.runAction(t)},e.prototype.update=function(t){if(!(this.path.length<=0)){this.currentTime+=t;var e=1e3*this.currentTime;this.index<this.path.length-1&&e>this.drawLine_second&&(this.graphics.moveTo(this.path[this.index].pos.x,this.path[this.index].pos.y),this.graphics.lineTo(this.path[this.index+1].pos.x,this.path[this.index+1].pos.y),this.target.node.position=this.path[this.index+1].pos,this.target.setAnimation(this.path[this.index+1].animation),this.graphics.stroke(),this.index++,this.currentTime=0),this.index>=this.path.length-1&&(this.target.end(),this.loop&&(this.graphics.clear(),this.currentTime=0))}},__decorate([c(i.default)],e.prototype,"target",void 0),__decorate([c(cc.Graphics)],e.prototype,"graphics",void 0),__decorate([c],e.prototype,"drawPath",void 0),__decorate([c],e.prototype,"loop",void 0),__decorate([c],e.prototype,"totalPlayTime",void 0),e=__decorate([a],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./AnimationReplay":"AnimationReplay"}],PathRecorder:[function(t,e,o){"use strict";cc._RF.push(e,"7acceozVY5M2KuBhpbSj2sC","PathRecorder"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./NetWrokManger"),n=t("./MovingController"),a=cc._decorator,c=a.ccclass,r=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.recordFPS=.1,e.target=null,e.accumulateTime=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.init(),this.accumulateTime=0},e.prototype.init=function(){window.path=[],window.accurate_path=[]},e.prototype.update=function(t){var e=1e3/this.recordFPS;this.accumulateTime+=t;var o=Math.round(1e3*this.accumulateTime);this.target&&o%10==0&&window.accurate_path.push({pos:this.target.node.position,animation:this.target.getCurrentAction()}),o<=e||(this.accumulateTime=0,this.target&&window.path.push({pos:this.target.node.position,animation:this.target.getCurrentAction()}))},e.prototype.getPath=function(){return window.path},e.prototype.passPathToServer=function(){i.default.saveFile(JSON.stringify(window.path))},__decorate([r],e.prototype,"recordFPS",void 0),__decorate([r(n.default)],e.prototype,"target",void 0),e=__decorate([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./MovingController":"MovingController","./NetWrokManger":"NetWrokManger"}],PathReplay:[function(t,e,o){"use strict";cc._RF.push(e,"31bccum8BRMu76nU62Sn7ha","PathReplay"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e=__decorate([n],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],ZindexManager:[function(t,e,o){"use strict";cc._RF.push(e,"c559baKysxJOq2/JO0Yq4cD","ZindexManager"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.settingObj=[],e}return __extends(e,t),e.prototype.update=function(t){this.settingObj.sort(function(t,e){return Math.sign(e.position.y-t.position.y)}),this.settingObj.forEach(function(t,e){t.zIndex=e+1})},__decorate([a(cc.Node)],e.prototype,"settingObj",void 0),e=__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],myLabel:[function(t,e,o){"use strict";cc._RF.push(e,"a1e33zxkIVF1bZZ1YDvixba","myLabel"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodestirng=!1,e}return __extends(e,t),e.prototype.start=function(){this.nodestirng&&this.setNodNumber()},e.prototype.setNodNumber=function(){var t=window.nodCount;this.string=t.toString()},__decorate([a],e.prototype,"nodestirng",void 0),e=__decorate([n],e)}(cc.Label);o.default=c,cc._RF.pop()},{}],"physcis-bound":[function(t,e,o){"use strict";cc._RF.push(e,"5a89f3Kr5pIJ66r98LUHlkB","physcis-bound"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.debug=!1,e.width=0,e.height=0,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=1==this.debug?1:0,cc.director.getPhysicsManager().gravity=cc.v2(0,0);var t=this.width,e=this.height,o=new cc.Node;o.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this._addBound(o,0,e/2,t,20),this._addBound(o,0,-e/2,t,20),this._addBound(o,-t/2,0,20,e),this._addBound(o,t/2,0,20,e),o.parent=this.node},e.prototype._addBound=function(t,e,o,i,n){var a=t.addComponent(cc.PhysicsBoxCollider);a.offset.x=e,a.offset.y=o,a.size.width=i,a.size.height=n},e.prototype.start=function(){cc.director.getPhysicsManager().debugDrawFlags=1==this.debug?1:0},__decorate([a],e.prototype,"debug",void 0),__decorate([a],e.prototype,"width",void 0),__decorate([a],e.prototype,"height",void 0),e=__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{}]},{},["AnimationReplay","Counter","Global","MovingController","NetWrokManger","PathDrawer","PathRecorder","PathReplay","ZindexManager","myLabel","physcis-bound"]);